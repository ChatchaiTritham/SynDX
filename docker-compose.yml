version: '3.8'

services:
 syndx:
 build: .
 image: chatchaitritham/syndx:latest
 container_name: syndx-framework
 environment:
 - SYNDX_DATA_DIR=/app/data
 - SYNDX_OUTPUT_DIR=/app/outputs
 - PYTHONUNBUFFERED=1
 volumes:
 - ./outputs:/app/outputs
 - ./data:/app/data
 - ./notebooks:/app/notebooks
 ports:
 - "8888:8888"
 command: jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root --NotebookApp.token=''

 syndx-cli:
 build: .
 image: chatchaitritham/syndx:latest
 container_name: syndx-cli
 environment:
 - SYNDX_DATA_DIR=/app/data
 - SYNDX_OUTPUT_DIR=/app/outputs
 volumes:
 - ./outputs:/app/outputs
 - ./data:/app/data
 command: /bin/bash -c "python -m syndx.pipeline"
 profiles:
 - cli

networks:
 default:
 name: syndx-network

volumes:
 syndx-data:
 driver: local
 syndx-outputs:
 driver: local
